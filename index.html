<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSE Workshop  </title>
    <link rel="stylesheet" href="style.css">
    <style>
      body { font-family: Arial, sans-serif; padding: 20px; }
      #searchInput { padding: 8px; width: 300px; margin-right: 10px; }
      #searchButton { padding: 8px 12px; }
      .highlight { background-color: yellow; }
  </style>

    <script src="main.js"></script>
    
   
   
   
</head>
<body>


   <!--===================SEARCH BAR ==================================-->
   <div>

    <br>
    <br>
    <br>
    <br>
    <br>   
      <br>
       <p>This is a paragraph of text with various words. Try searching for banana, cherry, or grape.</p>
       <p>Another paragraph with more text and some repeating words like banana and apple.</p>
       <p>Final paragraph mentioning fruits such as cherry and elderberry.</p>
   
       <input type="text" id="searchInput" placeholder="Search text on page..."/>
       <button id="searchButton">Search</button>
   
       <script>
           const searchInput = document.getElementById('searchInput');
           const searchButton = document.getElementById('searchButton');
   
           function clearHighlights() {
               document.querySelectorAll('.highlight').forEach(el => {
                   const parent = el.parentNode;
                   parent.replaceChild(document.createTextNode(el.textContent), el);
                   parent.normalize();
               });
           }
   
           function highlightText(text) {
               if (!text) return;
   
               const body = document.body;
               const regex = new RegExp(`(${text})`, 'gi');
   
               const walker = document.createTreeWalker(body, NodeFilter.SHOW_TEXT, {
                   acceptNode: function(node) {
                       if (node.parentNode && node.parentNode.tagName !== 'SCRIPT' && node.parentNode.tagName !== 'STYLE') {
                           return NodeFilter.FILTER_ACCEPT;
                       }
                       return NodeFilter.FILTER_REJECT;
                   }
               });
   
               while (walker.nextNode()) {
                   const currentNode = walker.currentNode;
                   if (regex.test(currentNode.textContent)) {
                       const span = document.createElement('span');
                       span.className = 'highlight';
                       span.textContent = currentNode.textContent.match(regex)[0];
   
                       const newNode = currentNode.splitText(currentNode.textContent.search(regex));
                       newNode.nodeValue = newNode.nodeValue.substring(span.textContent.length);
                       currentNode.parentNode.insertBefore(span, newNode);
                   }
               }
           }
   
           searchButton.addEventListener('click', function() {
               clearHighlights();
               const searchText = searchInput.value.trim();
               if (searchText) {
                   highlightText(searchText);
               }
           });
       </script>
   
  </div>
   

<script>
  drift.on('ready', function(api) {
  drift.api.setUserAttributes({
    bio: new URLSearchParams(window.location.search).get('smart')
  });
});
</script>

</div>

  <!--=================== startInteraction ==================================-->

<!--------
<script>
drift.on ('ready',function(api){
  drift.api.startInteraction({
  interactionId: 260834, 
goToConversation: true 

});
});
console.log("PB");
</script>
-->

</div>


  <!--=================GA4========================-->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CHBW326KS0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CHBW326KS0');
</script>

  <!--=================== Data Layers ==================================-->


<script>
  window.drift.on('ready', function(api){
    window.drift.on("conversation:buttonClicked", function(data) {
      console.log("conversation:buttonClicked" = JSON.stringify(data))
      if (data.buttonBody === "Visit"){
    window.location.href = "https://tsedrift.netlify.app/thankyou";
   }
    })
  });
</script>

  <!----===================Payload Return for Drift Events ==================================-->

<!-- <script>
window.drift.on("conversation:playbookFired", function(data) {
  console.log("Playbook fired: " + JSON.stringify(data))
})
</script>

<script>
  window.drift.on("startConversation", function(data) {
    console.log("CHAT STARTED" + JSON.stringify(data))
  })
  </script>

<script>
  window.drift.on("conversation:firstInteraction", function(data) {
    console.log("FIRST INTERACTION " + JSON.stringify(data))
  })
  </script>

  <script>
window.drift.on("conversation:buttonClicked", function(data) {
  console.log("user clicked a button with text: " + data.buttonBody);
    console.log("playbookId " + data.playbookId);
});
  </script> -->

  


  <!--=================== Dynamically Tracking Changein Online Status ==================================-->

<!-- TURNED OFF
<script>
  // Initialize Drift
  window.drift.on('ready', function(api, event) {
    console.log('status' + JSON.stringify(event))
      // Initial check for online/offline status
      //checkOnlineStatus(event.data.isOnline);
      ///console.log('status' + JSON.stringify(event))
  })


  window.drift.on("emailCapture", function(data) {
  console.log("user identified as: " + JSON.stringify(data));
  window.drift.on('ready', function(api, event) {
    console.log('status' + JSON.stringify(event))
      // Initial check for online/offline status
      //checkOnlineStatus(event.data.isOnline);
      ///console.log('status' + JSON.stringify(event))
  })

});


  window.drift.on('statusChange', function(data) {
    comsole.log('changed');
        //checkOnlineStatus(data.isOnline);
    });

</script>
-->


<br>
<br>
<br>
<br>
<br>

<br>
<br>
<br>
<br>
<br>


<br>
<br>
<br>
<br>
<br>


<br>
<br>
<br>
<br>
<br>


<br>
<br>
<br>
<br>
<br>




<button onclick="window.location.href='https://tsedrift.netlify.app/#engage';">Driftlink</button>

<!--"window.location.href='https://wpengine.com/contact-sales/#chat';"-->

</body>
</html>